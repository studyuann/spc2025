<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>실시간 검색 기능</h1>
    <input type="text" id="searchInput" placeholder="검색...">
    <ul id="itemsList">
        <li>Apple</li>
        <li>Banana</li>
        <li>Orange</li>
        <li>Grape</li>
        <li>Mango</li>
        <li>Pineapple</li>
        <li>Strawberry</li>
        <li>Blueberry</li>
        <li>Watermelon</li>
        <li>Peach</li>
        <li>Cherry</li>
        <li>Kiwi</li>
        <li>Pear</li>
        <li>Lemon</li>
        <li>Lime</li>
        <li>Papaya</li>
        <li>Plum</li>
        <li>Raspberry</li>
        <li>Coconut</li>
        <li>Pomegranate</li>
    </ul>
    <script>
        // 미션1. 실시간 검색 기능을 구현한다.
        // 미션1-1. 검색창의 입력 결과를 가져온다.
        const searchInput = document.getElementById('searchInput');
        const itemsList = document.getElementById('itemsList');
        const items = itemsList.getElementsByTagName('li'); // className 또는 tagName 은 범위를 좁히는게 좋음

        const items2 = itemsList.querySelectorAll('li'); // 이놈은 리스트 형태(NodeList)라서 forEach가 사용 가능한 형태임

        // 미션1-2. 해당 단어를 목록에 "포함"되어 있는지 확인한다. (includes 라는 내장함수 사용)
        // for 루프로 반복해서...
        // searchInput.addEventListener('keyup', () => {
        //     for (let i = 0; i < items.length; i++) {
        //         const item = items[i]; // 전체 목록에서 하나의 아이템(DOM)
        //         const text = item.textContent.toLowerCase(); // 그 하나의 아이템의 글자(String)
        //         // 사용자가 입력한 글자가, 이 하나의 li 요소 안에 있냐??
        //         // 미션1-3. 해당되는것은 보여주고, 해당하지 않는것을 숨긴다. (display: none; <-- css 속성 활용)
        //         if (text.includes(searchInput.value.toLowerCase())) {
        //             // 사용자가 입력한거에 있음
        //             item.style.display = '';
        //         } else {
        //             // 사용자가 입력한거에 없음
        //             item.style.display = 'none';
        //         }
        //     }
        // });

        // 참고: 이걸 하는 과정에서, 의도치 않는 상황이 발생할것임.. (내가 의도한 무언가가 잘 안될것임)
        // ==> 대소문자에 대한 이슈가 있음.. 그래서 검색을 어렵게 만듦... 그럼 어떻게 해결???
        // ==> toUpperCase 또는 toLowerCase 등으로 한쪽으로 변환해서 검색

        // 방법2. foreach를 쓰려면?? 배열/리스트 형태면 가능.. 
        searchInput.addEventListener('keyup', () => {
            // 변환시키는 방법
            // 1. 기존의 items를 Array.from() 에 넣고 Casting 캐스팅 = 변환하는과정
            // 2. 스프레드 연산자 (...) 문법을 통해서 안에 있는 (적절하게 패킹되어 있는걸 개별 요소로 풀어주는 연산자)
            
            // 방법1. Array 로 캐스팅
            // Array.from(items).forEach((item) => { 
            //     console.log(item);
            // })

            // 방법2. 스프레드 연산자로 리스트로 풀어주기
            // [...items].forEach((item) => {
            //     console.log(item);
            // })

            // 방법3. 애초에.. HTMLColection 으로 만들지 않음.. 그냥 NodeList라고 불리는 리스트 형태로 만듦..
            items2.forEach((item) => {
                const text = item.textContent.toLowerCase();
                const filter = searchInput.value.toLowerCase();
                
                if (text.toLowerCase().includes(filter)) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            })
        });
    </script>      
</body>
</html>
